# موفّر البيانات Supabase

يوفّر الملف `src/data/supabaseDataProvider.ts` طبقة تواصل مع قاعدة البيانات عبر مكتبة `@supabase/supabase-js` لاستخدامها داخل React-Admin.

## الدوال المتاحة

### `getList`
جلب قائمة من السجلات مع دعم التصفية والترتيب والتقسيم إلى صفحات.

### `getOne`
استرجاع سجل مفرد اعتماداً على المعرّف.

### `create`
إضافة سجل جديد وإرجاعه بعد الإنشاء.

### `update`
تحديث سجل موجود وإرجاع النتيجة المحدثة.

### `delete`
حذف سجل استناداً إلى المعرّف وإرجاع السجل المحذوف.

## آلية العمل العامة

- يتم حقن عميل Supabase من الملف `src/supabaseClient.ts` داخل الموفّر.
- كل دالة تستدعي واجهة Supabase وتعيد نتيجة متوافقة مع متطلبات React-Admin.
- في حال حدوث خطأ يتم إلقاء الاستثناء القادم من Supabase ليتم التعامل معه من قبل التطبيق.

## كيفية الاختبار

1. تأكد من ضبط متغيرات الاتصال في `src/supabaseClient.ts`.
2. شغّل `npm run lint` للتحقق من سلامة الكود.
3. شغّل `npm run build` للتأكد من نجاح عملية التجميع.

## إضافة عمليات جديدة أو تعديل القائمة

1. افتح الملف `src/data/supabaseDataProvider.ts`.
2. أضف الدالة أو عدّل الموجودة داخل الكائن المصدّر مع توثيق باللغة العربية.
3. استخدم عميل Supabase الممرّر إلى الموفّر ولا تنشئ عميلًا جديدًا.
4. حدّث هذا الملف التوثيقي لشرح العملية الجديدة.
5. نفّذ أوامر الاختبار المذكورة أعلاه للتأكد من سلامة التعديلات.

